<!doctype html>
<html class="no-js" lang="fr" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Recherche" href="search.html" /><link rel="next" title="Algèbre linéaire" href="tour_linalg.html" /><link rel="prev" title="Polynômes" href="tour_polynomial.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Parents, conversions, coercitions - Tutoriel Sage v10.6.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/custom-furo.css?v=d2ecc25a" />
    <link rel="stylesheet" type="text/css" href="_static/custom-jupyter-sphinx.css?v=75860c6b" />
    <link rel="stylesheet" type="text/css" href="_static/custom-codemirror-monokai.css?v=b5588f12" />
    <link rel="stylesheet" type="text/css" href="_static/custom-tabs.css?v=8a724d73" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Tutoriel Sage v10.6.1</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../en/index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">passagemath 10.6.1 Documentation</span>
  
</a><div class="select-wrapper">
  <select id="versions-menu" onchange="changeVersion()">
    <option value="" selected>other version</option>
    <option value="https://doc-develop--sagemath.netlify.app">develop</option>
  </select>
</div><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Recherche" name="q" aria-label="Recherche">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="index.html">Home - Tutoriel Sage v10.6.1</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="tour.html">Visite guidée</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Visite guidée</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tour_assignment.html">Affectation, égalité et arithmétique</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html">Obtenir de l’aide</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_help.html#fonctions-indentation-et-iteration">Fonctions, indentation et itération</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_algebra.html">Algèbre de base et calcul infinitésimal</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_plotting.html">Graphiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_functions.html">Problèmes fréquents concernant les fonctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_rings.html">Anneaux de base</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_polynomial.html">Polynômes</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Parents, conversions, coercitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_linalg.html">Algèbre linéaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_groups.html">Groupes finis, groupes abéliens</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_numtheory.html">Théorie des nombres</a></li>
<li class="toctree-l2"><a class="reference internal" href="tour_advanced.html">Quelques mathématiques plus avancées</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interactive_shell.html">La ligne de commande interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="latex.html">Sage, LaTeX et compagnie</a></li>
<li class="toctree-l1"><a class="reference internal" href="programming.html">Programmation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sagetex.html">Utiliser SageTeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="afterword.html">Postface</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Annexe</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliographie</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/passagemath/passagemath/blob/develop/src/doc/fr/tutorial/tour_coercion.rst" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/passagemath/passagemath/edit/develop/src/doc/fr/tutorial/tour_coercion.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="parents-conversions-coercitions">
<span id="section-coercion"></span><h1>Parents, conversions, coercitions<a class="headerlink" href="#parents-conversions-coercitions" title="Lien vers cette rubrique">¶</a></h1>
<p>Cette section peut paraître plus technique que celles qui précèdent, mais nous
pensons qu’il est important de comprendre ce que sont les parents et les
coercitions pour utiliser comme il faut les structures algébriques fournies par
Sage.</p>
<p>Nous allons voir ici ce que ces notions signifient, mais pas comment les mettre
en œuvre pour implémenter une nouvelle structure algébrique. Un tutoriel
thématique couvrant ce point est disponible <a class="reference external" href="http://passagemath.org/docs/latest/html/en/thematic_tutorials/coercion_and_categories.html">ici</a>.</p>
<section id="elements">
<h2>Éléments<a class="headerlink" href="#elements" title="Lien vers cette rubrique">¶</a></h2>
<p>Une première approximation en Python de la notion mathématique d’anneau
pourrait consister à définir une classe pour les éléments <code class="docutils literal notranslate"><span class="pre">X</span></code> de l’anneau
concerné, de fournir les méthodes « double-underscore » nécessaires pour donner
un sens aux opérations de l’anneau, par exemple  <code class="docutils literal notranslate"><span class="pre">__add__</span></code>, <code class="docutils literal notranslate"><span class="pre">__sub__</span></code> et
<code class="docutils literal notranslate"><span class="pre">__mul__</span></code>, et naturellement de s’assurer qu’elles respectent les axiomes de
la structure d’anneau.</p>
<p>Python étant un language (dynamiquement) fortement typé, on pourrait s’attendre
à devoir implémenter une classe pour chaque anneau. Après tout, Python définit
bien un type <code class="docutils literal notranslate"><span class="pre">&lt;int&gt;</span></code> pour les entiers, un type <code class="docutils literal notranslate"><span class="pre">&lt;float&gt;</span></code> pour les réels, et
ainsi de suite. Mais cette approche ne peut pas fonctionner : il y a une
infinité d’anneaux différents, et l’on ne peut pas implémenter une infinité de
classes !</p>
<p>Une autre idée est de créer une hiérarchie de classes destinées à implémenter
les éléments des structures algébriques usuelles : éléments de groupes,
d’anneaux, d’algèbres à division, d’anneaux commutatifs, de corps, d’algèbres,
etc.</p>
<p class="with-sage-tab with-python-tab">Mais cela signifie que des éléments d’anneaux franchement différents peuvent
avoir le même type.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">P</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">3</span><span class="p">)[]</span>
<span class="gp">sage:</span> <span class="n">Q</span><span class="o">.&lt;</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">)[]</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">P</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">))[</span><span class="s1">&#39;x, y&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,)</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="s1">&#39;z&#39;</span><span class="p">)[</span><span class="s1">&#39;a, b&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,)</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">On pourrait aussi vouloir avoir des classes Python différentes pour fournir
plusieurs implémentations d’une même structure mathématique (matrices denses
contre matrices creuses par exemple).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">P</span><span class="o">.&lt;</span><span class="n">a</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">Q</span><span class="o">.&lt;</span><span class="n">b</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">R</span><span class="o">.&lt;</span><span class="n">c</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">implementation</span><span class="o">=</span><span class="s1">&#39;NTL&#39;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint&#39;&gt;</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_ring.PolynomialRing_integral_domain_with_category.element_class&#39;&gt;</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_integer_dense_ntl.Polynomial_integer_dense_ntl&#39;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">P</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,));</span> <span class="p">(</span><span class="n">a</span><span class="p">,)</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,));</span> <span class="p">(</span><span class="n">b</span><span class="p">,)</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">implementation</span><span class="o">=</span><span class="s1">&#39;NTL&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,));</span> <span class="p">(</span><span class="n">c</span><span class="p">,)</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_integer_dense_flint.Polynomial_integer_dense_flint&#39;&gt;</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_ring.PolynomialRing_integral_domain_with_category.element_class&#39;&gt;</span>
<span class="go">&lt;class &#39;sage.rings.polynomial.polynomial_integer_dense_ntl.Polynomial_integer_dense_ntl&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p>Deux problèmes se posent alors. D’une part, si deux éléments sont instances de
la même classe, on s’attend à ce que leur méthode <code class="docutils literal notranslate"><span class="pre">__add__</span></code> soit capable de
les additionner, alors que ce n’est pas ce que l’on souhaite si les éléments
appartiennent en fait à des anneaux différents. D’autre part, si l’on a deux
éléments qui appartiennent à des implémentations différentes d’un même anneau,
on veut pouvoir les ajouter, et ce n’est pas immédiats s’ils ne sont pas
instances de la même classe.</p>
<p>La solution à ces difficultés est fournie par le mécanisme de <em>coercition</em>
décrit ci-dessous.</p>
<p>Mais avant tout, il est essentiel que chaque élément « sache » de quoi il est
élément. Cette information est donnée par la méthode <code class="docutils literal notranslate"><span class="pre">parent()</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">a</span><span class="o">.</span><span class="n">parent</span><span class="p">();</span> <span class="n">b</span><span class="o">.</span><span class="n">parent</span><span class="p">();</span> <span class="n">c</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
<span class="go">Univariate Polynomial Ring in a over Integer Ring</span>
<span class="go">Sparse Univariate Polynomial Ring in b over Integer Ring</span>
<span class="go">Univariate Polynomial Ring in c over Integer Ring (using NTL)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">parent</span><span class="p">();</span> <span class="n">b</span><span class="o">.</span><span class="n">parent</span><span class="p">();</span> <span class="n">c</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
<span class="go">Univariate Polynomial Ring in a over Integer Ring</span>
<span class="go">Sparse Univariate Polynomial Ring in b over Integer Ring</span>
<span class="go">Univariate Polynomial Ring in c over Integer Ring (using NTL)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="parents-et-categories">
<h2>Parents et catégories<a class="headerlink" href="#parents-et-categories" title="Lien vers cette rubrique">¶</a></h2>
<p class="with-sage-tab with-python-tab">En plus d’une hiérarchie de classes destinée à implémenter les éléments de
structures algébriques, Sage fournit une hiérarchie similaire pour les
structures elles-mêmes. Ces structures s’appellent en Sage des <em>parents</em>, et
leurs classes dérivent d’une même classe de base. Celle-ci a des sous-classes
« ensemble », « anneau », « corps », et ainsi de suite, dont la hiérarchie
correspond à peu près à celle des concepts mathématiques qu’elles décrivent :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="n">Field</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Ring</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="n">Field</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">Ring</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span><span class="n">Field</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Ring</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="n">Field</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">Ring</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Or en algèbre, on regroupe les objets qui partagent le même genre de structure
algébrique en ce que l’on appelle des <em>catégories</em>. Il y a donc un parallèle
approximatif entre la hiérarchie des classes de Sage et la hiérarchie des
catégories. Mais cette correspondance n’est pas parfaite, et Sage implémente
par ailleurs les catégories en tant que telles :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">Rings</span><span class="p">()</span>
<span class="go">Category of rings</span>
<span class="gp">sage:</span> <span class="n">ZZ</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Join of Category of Dedekind domains</span>
<span class="go">    and Category of euclidean domains</span>
<span class="go">    and Category of noetherian rings</span>
<span class="go">    and Category of infinite enumerated sets</span>
<span class="go">    and Category of metric spaces</span>
<span class="gp">sage:</span> <span class="n">ZZ</span><span class="o">.</span><span class="n">category</span><span class="p">()</span><span class="o">.</span><span class="n">is_subcategory</span><span class="p">(</span><span class="n">Rings</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">ZZ</span> <span class="ow">in</span> <span class="n">Rings</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">ZZ</span> <span class="ow">in</span> <span class="n">Fields</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="n">QQ</span> <span class="ow">in</span> <span class="n">Fields</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Rings</span><span class="p">()</span>
<span class="go">Category of rings</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">ZZ</span><span class="o">.</span><span class="n">category</span><span class="p">()</span>
<span class="go">Join of Category of Dedekind domains</span>
<span class="go">    and Category of euclidean domains</span>
<span class="go">    and Category of noetherian rings</span>
<span class="go">    and Category of infinite enumerated sets</span>
<span class="go">    and Category of metric spaces</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">ZZ</span><span class="o">.</span><span class="n">category</span><span class="p">()</span><span class="o">.</span><span class="n">is_subcategory</span><span class="p">(</span><span class="n">Rings</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">ZZ</span> <span class="ow">in</span> <span class="n">Rings</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">ZZ</span> <span class="ow">in</span> <span class="n">Fields</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">QQ</span> <span class="ow">in</span> <span class="n">Fields</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p>Tandis que la hiérarchie des classes est déterminée avant tout par des
considérations de programmation, l’infrastructure des catégories cherche plutôt
à respecter la structure mathématique. Elle permet de munir les objets d’une
catégorie de méthodes et de tests génériques, qui ne dépendent pas de
l’implémentation particulière d’un objet donné de la catégorie.</p>
<p class="with-sage-tab with-python-tab">Les parents en tant qu’objets Python doivent être uniques. Ainsi, lorsqu’un
anneau de polynômes sur un anneau donné et avec une liste donnée de générateurs
est construit, il est conservé en cache et réutilisé par la suite :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">RR</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">RR</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">RR</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">RR</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="types-et-parents">
<h2>Types et parents<a class="headerlink" href="#types-et-parents" title="Lien vers cette rubrique">¶</a></h2>
<p class="with-sage-tab with-python-tab">Le type <code class="docutils literal notranslate"><span class="pre">RingElement</span></code> ne correspond pas parfaitement à la notion
mathématique d’élément d’anneau. Par exemple, bien que les matrices carrées
appartiennent à un anneau, elles ne sont pas de type <code class="docutils literal notranslate"><span class="pre">RingElement</span></code> :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">M</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="n">M</span>
<span class="go">[0 0]</span>
<span class="go">[0 0]</span>
<span class="gp">sage:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">RingElement</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">M</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span> <span class="n">M</span>
<span class="go">[0 0]</span>
<span class="go">[0 0]</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">RingElement</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Si les <em>parents</em> sont censés être uniques, des <em>éléments</em> égaux d’un parent ne
sont pas nécessairement identiques. Le comportement de Sage diffère ici de
celui de Python pour certains entiers (pas tous) :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Python int</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span>           <span class="c1"># Sage Integer</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># Python int</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="n">Integer</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="n">Integer</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>           <span class="c1"># Sage Integer</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Il faut bien comprendre que les éléments d’anneaux différents ne se distinguent
généralement pas par leur type, mais par leur parent :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">b</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">parent</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">Finite Field of size 2</span>
<span class="gp">sage:</span> <span class="n">parent</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Finite Field of size 5</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parent</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">Finite Field of size 2</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parent</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Finite Field of size 5</span>
</pre></div>
</div>
</div>
</div>
<p>Ainsi, <strong>le parent d’un élément est plus important que son type</strong> du point de
vue algébrique.</p>
</section>
<section id="conversion-et-coercition">
<h2>Conversion et coercition<a class="headerlink" href="#conversion-et-coercition" title="Lien vers cette rubrique">¶</a></h2>
<p>Il est parfois possible de convertir un élément d’un certain parent en élément
d’un autre parent. Une telle conversion peut être explicite ou implicite. Les
conversions implicites sont appelées <em>coercitions</em>.</p>
<p>Le lecteur aura peut-être rencontré les notions de <em>conversion de type</em> et de
<em>coercition de type</em> dans le contexte du langage C par exemple. En Sage, il
existe aussi des notions de conversion et de coercition, mais elles
s’appliquent aux <em>parents</em> et non aux types. Attention donc à ne pas confondre
les conversions en Sage avec les conversions de type du C !</p>
<p>Nous nous limitons ici à une brève présentation, et renvoyons le lecteur à la
section du manuel de référence consacrée aux coercitions ainsi qu’au
<a class="reference external" href="http://passagemath.org/docs/latest/html/en/thematic_tutorials/coercion_and_categories.html">tutoriel</a>
spécifique pour plus de détails.</p>
<p>On peut adopter deux positions extrêmes sur les opérations arithmétiques entre
éléments d’anneaux <em>différents</em> :</p>
<ul class="simple">
<li><p>les anneaux différents sont des mondes indépendants, et l’addition ou la
multiplication entre éléments d’anneaux différents n’ont aucun sens ; même
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">1/2</span></code> n’a pas de sens puisque le premier terme est un entier et le
second un rationnel ;</p></li>
</ul>
<p>ou</p>
<ul class="simple">
<li><p>si un élément <code class="docutils literal notranslate"><span class="pre">r1</span></code> d’un anneau <code class="docutils literal notranslate"><span class="pre">R1</span></code> peut, d’une manière ou d’une autre,
s’interpréter comme élément d’un autre anneau <code class="docutils literal notranslate"><span class="pre">R2</span></code>, alors toutes les
opérations arithmétiques entre <code class="docutils literal notranslate"><span class="pre">r1</span></code> et un élément quelconque de <code class="docutils literal notranslate"><span class="pre">R2</span></code> sont
permises. En particulier, les éléments neutres de la multiplication dans les
corps et anneaux doivent tous être égaux entre eux.</p></li>
</ul>
<p class="with-sage-tab with-python-tab">Sage adopte un compromis. Si <code class="docutils literal notranslate"><span class="pre">P1</span></code> et <code class="docutils literal notranslate"><span class="pre">P2</span></code> sont des parents et si <code class="docutils literal notranslate"><span class="pre">p1</span></code> est
un élément de <code class="docutils literal notranslate"><span class="pre">P1</span></code>, l’utilisateur peut demander explicitement comment <code class="docutils literal notranslate"><span class="pre">P1</span></code>
s’interprète dans <code class="docutils literal notranslate"><span class="pre">P2</span></code>. Cela n’a pas forcément de sens dans tous les cas, et
l’interprétation peut n’être définie que pour certains éléments de <code class="docutils literal notranslate"><span class="pre">P1</span></code> ;
c’est à l’utilisateur de s’assurer que la conversion a un sens. Cela s’appelle
une <strong>conversion</strong> :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">b</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p>Cependant, une conversion <em>implicite</em> (c’est-à-dire automatique) n’est
possible que si elle peut se faire <em>systématiquement</em> et de manière
<em>cohérente</em>. Il faut ici absolument faire preuve de rigueur.</p>
<p>Une telle conversion implicite s’appelle une <strong>coercition</strong>. Si une coercition
est définie entre deux parents, elle doit coïncider avec la conversion. De
plus, les coercitions doivent obéir aux deux conditions suivantes :</p>
<ol class="arabic simple">
<li><p>Une coercition de <code class="docutils literal notranslate"><span class="pre">P1</span></code> dans <code class="docutils literal notranslate"><span class="pre">P2</span></code> doit être un morphisme (par exemple
un morphisme d’anneaux). Elle doit être définie pour <em>tous</em> les éléments de
<code class="docutils literal notranslate"><span class="pre">P1</span></code>, et préserver la structure algébrique de celui-ci.</p></li>
<li><p>Le choix des applications de coercition doit être fait de manière cohérente.
Si <code class="docutils literal notranslate"><span class="pre">P3</span></code> est un troisième parent, la composée de la coercition choisie
de <code class="docutils literal notranslate"><span class="pre">P1</span></code> dans <code class="docutils literal notranslate"><span class="pre">P2</span></code> et de celle de <code class="docutils literal notranslate"><span class="pre">P2</span></code> dans <code class="docutils literal notranslate"><span class="pre">P3</span></code> doit être la
coercition de <code class="docutils literal notranslate"><span class="pre">P1</span></code> dans <code class="docutils literal notranslate"><span class="pre">P3</span></code>. En particulier, s’il existe des
coercitions de <code class="docutils literal notranslate"><span class="pre">P1</span></code> dans <code class="docutils literal notranslate"><span class="pre">P2</span></code> et de <code class="docutils literal notranslate"><span class="pre">P2</span></code> dans <code class="docutils literal notranslate"><span class="pre">P1</span></code>, leur composée
doit être l’identité sur <code class="docutils literal notranslate"><span class="pre">P1</span></code>.</p></li>
</ol>
<p>Ainsi, bien qu’il soit possible de convertir tout élément de <code class="docutils literal notranslate"><span class="pre">GF(2)</span></code> en un
élément de <code class="docutils literal notranslate"><span class="pre">GF(5)</span></code>, la conversion ne peut être une coercition, puisque il
n’existe pas de morphisme d’anneaux de <code class="docutils literal notranslate"><span class="pre">GF(2)</span></code> dans <code class="docutils literal notranslate"><span class="pre">GF(5)</span></code>.</p>
<p class="with-sage-tab with-python-tab">Le second point — la cohérence des choix — est un peu plus compliqué à
expliquer. Illustrons-le sur l’exemple des anneaux de polynômes multivariés.
Dans les applications, il s’avère utile que les coercitions respectent les noms
des variables. Nous avons donc :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">R1</span><span class="o">.&lt;</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[]</span>
<span class="gp">sage:</span> <span class="n">R2</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">sage:</span> <span class="n">R2</span><span class="o">.</span><span class="n">has_coerce_map_from</span><span class="p">(</span><span class="n">R1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">R2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">x</span>
<span class="gp">sage:</span> <span class="n">R2</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">y</span>
<span class="gp">sage:</span> <span class="n">R2</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">y</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R1</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;x, y&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,)</span> <span class="o">=</span> <span class="n">R1</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R2</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R2</span><span class="o">.</span><span class="n">has_coerce_map_from</span><span class="p">(</span><span class="n">R1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R2</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">x</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R2</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">y</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R2</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">y</span>
</pre></div>
</div>
</div>
</div>
<p>En l’absence d’un morphisme d’anneau qui préserve les noms de variable, la
coercition entre anneaux de polynômes multivariés n’est pas définie. Il peut
tout de même exister une conversion qui envoie les variables d’un anneau sur
celle de l’autre en fonction de leur position dans la liste des générateurs :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">R3</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">sage:</span> <span class="n">R3</span><span class="o">.</span><span class="n">has_coerce_map_from</span><span class="p">(</span><span class="n">R1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="n">R3</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">sage:</span> <span class="n">R3</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">x</span>
<span class="gp">sage:</span> <span class="n">R3</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">TypeError: no canonical coercion</span>
<span class="go">from Multivariate Polynomial Ring in x, y over Integer Ring</span>
<span class="go">to Multivariate Polynomial Ring in z, x over Integer Ring</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span><span class="o">.</span><span class="n">has_coerce_map_from</span><span class="p">(</span><span class="n">R1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">z</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">x</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">TypeError: no canonical coercion</span>
<span class="go">from Multivariate Polynomial Ring in x, y over Integer Ring</span>
<span class="go">to Multivariate Polynomial Ring in z, x over Integer Ring</span>
</pre></div>
</div>
</div>
</div>
<p>Mais une telle conversion ne répond pas aux critères pour être une coercition :
en effet, en composant l’application de <code class="docutils literal notranslate"><span class="pre">ZZ['x','y']</span></code> dans <code class="docutils literal notranslate"><span class="pre">ZZ['y','x']</span></code>
avec celle qui préserve les positions de <code class="docutils literal notranslate"><span class="pre">ZZ['y','x']</span></code> dans <code class="docutils literal notranslate"><span class="pre">ZZ['a','b']</span></code>,
nous obtiendrions une application qui ne préserve ni les noms ni les positions,
ce qui viole la règle de cohérence.</p>
<p>Lorsqu’une coercition est définie, elle est souvent utilisée pour comparer des
éléments d’anneaux différents ou pour effectuer des opérations arithmétiques.
Cela est commode, mais il faut être prudent en étendant la relation d’égalité
<code class="docutils literal notranslate"><span class="pre">==</span></code> au-delà des frontières d’un parent donné. Par exemple, si <code class="docutils literal notranslate"><span class="pre">==</span></code> est
bien censé être une relation d’équivalence entre éléments d”<em>un</em> anneau, il
n’en va pas forcément de même quand on compare des éléments d’anneaux
différents. Ainsi, les éléments <code class="docutils literal notranslate"><span class="pre">1</span></code> de <code class="docutils literal notranslate"><span class="pre">ZZ</span></code> et d’un corps fini sont
considérés comme égaux, puisqu’il existe une coercition canonique des entiers
dans tout corps fini. En revanche, il n’y a en général pas de coercition entre
deux corps finis quelconques. On a donc</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="n">GF</span><span class="p">(</span><span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">GF</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">!=</span> <span class="n">GF</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p>De même, on a</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">R3</span><span class="p">(</span><span class="n">R1</span><span class="mf">.1</span><span class="p">)</span> <span class="o">==</span> <span class="n">R3</span><span class="mf">.1</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">R1</span><span class="mf">.1</span> <span class="o">==</span> <span class="n">R3</span><span class="mf">.1</span>
<span class="go">False</span>
<span class="gp">sage:</span> <span class="n">R1</span><span class="mf">.1</span> <span class="o">!=</span> <span class="n">R3</span><span class="mf">.1</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R3</span><span class="p">(</span><span class="n">R1</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="n">R3</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R1</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">R3</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R1</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">R3</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Une autre conséquence de la condition de cohérence est que les coercitions ne
sont possibles que des anneaux exacts (comme les rationnels <code class="docutils literal notranslate"><span class="pre">QQ</span></code>) vers les
anneaux inexacts (comme les réels à précision donnée <code class="docutils literal notranslate"><span class="pre">RR</span></code>), jamais l’inverse.
En effet, pour qu’une conversion de <code class="docutils literal notranslate"><span class="pre">RR</span></code> dans <code class="docutils literal notranslate"><span class="pre">QQ</span></code> puisse être une
coercition, il faudrait que la composée de la coercition de <code class="docutils literal notranslate"><span class="pre">QQ</span></code> dans <code class="docutils literal notranslate"><span class="pre">RR</span></code>
et de cette conversion soit l’identité sur <code class="docutils literal notranslate"><span class="pre">QQ</span></code>, ce qui n’est pas possible
puisque des rationnels distincts peuvent très bien être envoyés sur le même
élément de <code class="docutils literal notranslate"><span class="pre">RR</span></code> :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">RR</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">200</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">100</span><span class="p">)</span> <span class="o">==</span> <span class="n">RR</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">100</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">200</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">100</span> <span class="o">==</span> <span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">^</span><span class="mi">100</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--14-input--2" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">RR</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="o">+</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span> <span class="o">==</span> <span class="n">RR</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="o">+</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">==</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Lorsque l’on compare des éléments de deux parents <code class="docutils literal notranslate"><span class="pre">P1</span></code> et <code class="docutils literal notranslate"><span class="pre">P2</span></code>, il peut
arriver qu’il n’existe pas de coercition entre <code class="docutils literal notranslate"><span class="pre">P1</span></code> et <code class="docutils literal notranslate"><span class="pre">P2</span></code>, mais qu’il y
ait un choix canonique de parent <code class="docutils literal notranslate"><span class="pre">P3</span></code> tel que <code class="docutils literal notranslate"><span class="pre">P1</span></code> et <code class="docutils literal notranslate"><span class="pre">P2</span></code> admettent tous
deux des coercitions dans <code class="docutils literal notranslate"><span class="pre">P3</span></code>. Dans ce cas aussi, la coercition a lieu. Un
exemple typique de ce mécanisme est l’addition d’un rationnel et d’un polynôme
à coefficients entiers, qui produit un polynôme à coefficients rationnels :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--15-input--1" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">P1</span><span class="o">.&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[]</span>
<span class="gp">sage:</span> <span class="n">p</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">3</span>
<span class="gp">sage:</span> <span class="n">q</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
<span class="gp">sage:</span> <span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">Univariate Polynomial Ring in x over Integer Ring</span>
<span class="gp">sage:</span> <span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">q</span><span class="p">)</span>
<span class="go">Univariate Polynomial Ring in x over Rational Field</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--15-input--2" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">P1</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">x</span><span class="p">,)</span> <span class="o">=</span> <span class="n">P1</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">Univariate Polynomial Ring in x over Integer Ring</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parent</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">q</span><span class="p">)</span>
<span class="go">Univariate Polynomial Ring in x over Rational Field</span>
</pre></div>
</div>
</div>
</div>
<p>Notons qu’en principe, on aurait très bien pu choisir pour <code class="docutils literal notranslate"><span class="pre">P3</span></code> le corps des
fractions de <code class="docutils literal notranslate"><span class="pre">ZZ['x']</span></code>. Cependant, Sage tente de choisir un parent commun
<em>canonique</em> aussi naturel que possible (ici <code class="docutils literal notranslate"><span class="pre">QQ['x']</span></code>). Afin que cela
fonctionne de façon fiable, Sage ne se contente <em>pas</em> de prendre n’importe
lequel lorsque plusieurs candidats semblent aussi naturels les uns que les
autres. La manière dont le choix est fait est décrite dans le <a class="reference external" href="http://passagemath.org/docs/latest/html/en/thematic_tutorials/coercion_and_categories.html">tutoriel</a>
spécifique déjà mentionné.</p>
<p class="with-sage-tab with-python-tab">Dans l’exemple suivant, il n’y a pas de coercition vers un parent commun :</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--16-input--1" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">R</span><span class="o">.&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage:</span> <span class="n">S</span><span class="o">.&lt;</span><span class="n">y</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">TypeError: unsupported operand parent(s) for +: &#39;Univariate Polynomial Ring in x over Rational Field&#39; and &#39;Univariate Polynomial Ring in y over Rational Field&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--16-input--2" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">R</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">x</span><span class="p">,)</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">S</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">];</span> <span class="p">(</span><span class="n">y</span><span class="p">,)</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">_first_ngens</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">TypeError: unsupported operand parent(s) for +: &#39;Univariate Polynomial Ring in x over Rational Field&#39; and &#39;Univariate Polynomial Ring in y over Rational Field&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>En effet, Sage refuse de choisir entre les candidats  <code class="docutils literal notranslate"><span class="pre">QQ['x']['y']</span></code>,
<code class="docutils literal notranslate"><span class="pre">QQ['y']['x']</span></code>, <code class="docutils literal notranslate"><span class="pre">QQ['x','y']</span></code> et <code class="docutils literal notranslate"><span class="pre">QQ['y','x']</span></code>, car ces quatre structures
deux à deux distinctes semblent toutes des parents communs naturels, et aucun
choix canonique ne s’impose.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="tour_linalg.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Algèbre linéaire</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="tour_polynomial.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Polynômes</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2025, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Parents, conversions, coercitions</a><ul>
<li><a class="reference internal" href="#elements">Éléments</a></li>
<li><a class="reference internal" href="#parents-et-categories">Parents et catégories</a></li>
<li><a class="reference internal" href="#types-et-parents">Types et parents</a></li>
<li><a class="reference internal" href="#conversion-et-coercition">Conversion et coercition</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=e0235b68"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=8e571dd6"></script>
    <script src="_static/tabs.js?v=3ee01567"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="_static/translations.js?v=e6b791cb"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/jupyter-sphinx-furo.js?v=1d35515b"></script>
    </body>
</html>