<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Load Python, Sage, Cython, Fortran and Magma files in Sage" href="load.html" /><link rel="prev" title="Interactively tracing execution of a command" href="../misc/trace.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>The Sage Preparser - The Sage Command Line</title>
      <link rel="stylesheet" type="text/css" href="../../../%5fstatic/pygments.css?v=a078f75a" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/styles/furo.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/jupyter-sphinx.css?v=572af1d6" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/styles/furo-extensions.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/custom-furo.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/custom-jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/custom-codemirror-monokai.css" />
    <link rel="stylesheet" type="text/css" href="../../../%5fstatic/custom-tabs.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #0f0fff;
  --color-brand-content: #0f0fff;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">The Sage Command Line</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../%5fstatic/logo_sagemath_black.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../%5fstatic/logo_sagemath_white.svg" alt="Dark Logo"/>
  </div>
  
      <span class="sidebar-brand-text">passagemath 10.6.1 Reference Manual</span>
  
</a><div class="select-wrapper">
  <select id="versions-menu" onchange="changeVersion()">
    <option value="" selected>other version</option>
    <option value="https://doc-develop--sagemath.netlify.app">develop</option>
  </select>
</div><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-home">
  <div class="sidebar-tree">
    <ul><li class="toctree-l1">
      <a class="reference internal" href="../../index.html">Home - The Sage Command Line</a>
    </li></ul>
  </div>
</div><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../options.html">Invoking Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../startup.html">Sage startup scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environ.html">Environment variables used by Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environ.html#relevant-environment-variables-for-other-packages">Relevant environment variables for other packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/trace.html">Interactively tracing execution of a command</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">The Sage Preparser</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="load.html">Load Python, Sage, Cython, Fortran and Magma files in Sage</a></li>
<li class="toctree-l1"><a class="reference internal" href="attach.html">Keep track of attached files</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="display/formatter.html">IPython Displayhook Formatters</a></li>
<li class="toctree-l1"><a class="reference internal" href="display/pretty_print.html">The Sage pretty printer</a></li>
<li class="toctree-l1"><a class="reference internal" href="display/fancy_repr.html">Representations of objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="display/util.html">Utility functions for pretty-printing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rich_output/display_manager.html">Display Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/preferences.html">Display Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/pretty_print.html">The <code class="docutils literal notranslate"><span class="pre">pretty_print</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/buffer.html">Output Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/output_basic.html">Basic Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/output_graphics.html">Graphics Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/output_graphics3d.html">Three-Dimensional Graphics Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/output_video.html">Video Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/output_catalog.html">Catalog of all available output container types.</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/backend_base.html">Base Class for Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/test_backend.html">Test Backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/backend_doctest.html">The backend used for doctests</a></li>
<li class="toctree-l1"><a class="reference internal" href="rich_output/backend_ipython.html">IPython Backend for the Sage Rich Output System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="interpreter.html">Sage’s IPython Modifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_extension.html">Sage’s IPython Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface_magic.html">Magics for each of the Sage interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_kernel/interact.html">Interacts for the Sage Jupyter notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_kernel/widgets.html">Widgets to be used for the Sage Jupyter notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_kernel/install.html">Installing the SageMath Jupyter Kernel and Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_kernel/kernel.html">The Sage ZMQ Kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_tests.html">Tests for the IPython integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="display/jsmol_iframe.html">HTML Generator for JSmol</a></li>
<li class="toctree-l1"><a class="reference internal" href="image.html">Sage Wrapper for Bitmap Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputhook.html">The Sage Input Hook</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/passagemath/passagemath/edit/main/src/sage/repl/preparse.py" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="the-sage-preparser">
<span id="sage-repl-preparse"></span><h1>The Sage Preparser<a class="headerlink" href="#the-sage-preparser" title="Link to this heading">¶</a></h1>
<p id="module-sage.repl.preparse">EXAMPLES:</p>
<p class="with-sage-tab with-python-tab">Preparsing:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2/3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)/Integer(3)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2.5&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;2.5&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2^3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)**Integer(3)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a^b&#39;</span><span class="p">)</span>            <span class="c1"># exponent</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a**b&#39;</span><span class="p">)</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;G.0&#39;</span><span class="p">)</span>            <span class="c1"># generator</span>
<span class="go">&#39;G.gen(0)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a = 939393R&#39;</span><span class="p">)</span>    <span class="c1"># raw</span>
<span class="go">&#39;a = 939393&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a b c in L&#39;</span><span class="p">)</span>     <span class="c1"># implicit multiplication</span>
<span class="go">&#39;a*b*c in L&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2e3x + 3exp(y)&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;2e3&#39;)*x + Integer(3)*exp(y)&quot;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2/3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)/Integer(3)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2.5&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;2.5&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2^3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)**Integer(3)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a^b&#39;</span><span class="p">)</span>            <span class="c1"># exponent</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a**b&#39;</span><span class="p">)</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;G.0&#39;</span><span class="p">)</span>            <span class="c1"># generator</span>
<span class="go">&#39;G.gen(0)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a = 939393R&#39;</span><span class="p">)</span>    <span class="c1"># raw</span>
<span class="go">&#39;a = 939393&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a b c in L&#39;</span><span class="p">)</span>     <span class="c1"># implicit multiplication</span>
<span class="go">&#39;a*b*c in L&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2e3x + 3exp(y)&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;2e3&#39;)*x + Integer(3)*exp(y)&quot;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">A string with escaped quotes in it (the point here is that the
preparser does not get confused by the internal quotes):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="s2">&quot;&quot;</span><span class="n">Yes</span><span class="p">,</span><span class="s2">&quot; he said.&quot;</span>
<span class="go">&#39;&quot;Yes,&quot; he said.&#39;</span>
<span class="gp">sage:</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">; s</span>
<span class="go">&#39;\&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="s2">&quot;&quot;</span><span class="n">Yes</span><span class="p">,</span><span class="s2">&quot; he said.&quot;</span>
<span class="go">&#39;&quot;Yes,&quot; he said.&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">; s</span>
<span class="go">&#39;\&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">A hex literal:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;0x2e3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x2e3)&#39;</span>
<span class="gp">sage:</span> <span class="mh">0xA</span>
<span class="go">10</span>
<span class="gp">sage:</span> <span class="mh">0xe</span>
<span class="go">14</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;0x2e3&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x2e3)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mh">0xA</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mh">0xe</span><span class="p">)</span>
<span class="go">14</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Raw and hex work correctly:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="mh">0xa1</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.rings.integer.Integer&#39;&gt;</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="mh">0xa1</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="mh">0Xa1</span><span class="n">R</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mh">0xa1</span><span class="p">))</span>
<span class="go">&lt;class &#39;sage.rings.integer.Integer&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mh">0xa1</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mh">0Xa1</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">The preparser can handle PEP 515 (see <a class="extlink-issue reference external" href="https://github.com/sagemath/sage/issues/28490">Issue #28490</a>):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="mi">1_000_000</span> <span class="o">+</span> <span class="mi">3_000</span>
<span class="go">1003000</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)</span> <span class="o">+</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">3_000</span><span class="p">)</span>
<span class="go">1003000</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">In Sage, methods can also be called on integer and real literals (note
that in pure Python this would be a syntax error):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="mf">16.</span><span class="n">sqrt</span><span class="p">()</span>
<span class="go">4</span>
<span class="gp">sage:</span> <span class="mf">87.</span><span class="n">factor</span><span class="p">()</span>
<span class="go">3 * 29</span>
<span class="gp">sage:</span> <span class="mf">15.10</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>                                                                  <span class="c1"># needs sage.rings.real_mpfr</span>
<span class="go">3.88587184554509</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;87.sqrt()&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(87).sqrt()&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;15.10.sqrt()&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;15.10&#39;).sqrt()&quot;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">87</span><span class="p">)</span><span class="o">.</span><span class="n">factor</span><span class="p">()</span>
<span class="go">3 * 29</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">RealNumber</span><span class="p">(</span><span class="s1">&#39;15.10&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>                                                                  <span class="c1"># needs sage.rings.real_mpfr</span>
<span class="go">3.88587184554509</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;87.sqrt()&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(87).sqrt()&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;15.10.sqrt()&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;15.10&#39;).sqrt()&quot;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Note that calling methods on int literals in pure Python is a syntax
error, but Sage allows this for Sage integers and reals, because users
frequently request it:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;4.__add__(3)&#39;</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;4.__add__(3)&#39;</span><span class="p">)</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Symbolic functional notation:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="c1"># needs sage.symbolic</span>
<span class="gp">sage:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">f</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span> <span class="o">=</span> <span class="n">theta</span> <span class="o">+</span> <span class="n">beta</span><span class="p">;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">theta</span>
<span class="gp">sage:</span> <span class="n">f</span>
<span class="go">(theta, beta) |--&gt; beta + theta</span>
<span class="gp">sage:</span> <span class="n">a</span>
<span class="go">10</span>
<span class="gp">sage:</span> <span class="n">b</span>
<span class="go">x^2 + theta</span>
<span class="gp">sage:</span> <span class="n">f</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="go">2*theta</span>

<span class="gp">sage:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>                                                   <span class="c1"># needs sage.symbolic</span>
<span class="gp">sage:</span> <span class="n">f</span>                                                                             <span class="c1"># needs sage.symbolic</span>
<span class="go">(x, y) |--&gt; sqrt(5)*x*y</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="c1"># needs sage.symbolic</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="n">__tmp__</span><span class="o">=</span><span class="n">var</span><span class="p">(</span><span class="s2">&quot;theta,beta&quot;</span><span class="p">);</span> <span class="n">f</span> <span class="o">=</span> <span class="n">symbolic_expression</span><span class="p">(</span><span class="n">theta</span> <span class="o">+</span> <span class="n">beta</span><span class="p">)</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">beta</span><span class="p">);</span> <span class="n">b</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">theta</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">f</span>
<span class="go">(theta, beta) |--&gt; beta + theta</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="go">x^2 + theta</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="go">2*theta</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="n">__tmp__</span><span class="o">=</span><span class="n">var</span><span class="p">(</span><span class="s2">&quot;x,y&quot;</span><span class="p">);</span> <span class="n">f</span> <span class="o">=</span> <span class="n">symbolic_expression</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>                                                   <span class="p">)</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="c1"># needs sage.symbolic</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">f</span>                                                                             <span class="c1"># needs sage.symbolic</span>
<span class="go">(x, y) |--&gt; sqrt(5)*x*y</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">This involves an =-, but should still be turned into a symbolic
expression:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a(x) =- 5&#39;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); a = symbolic_expression(- Integer(5)).function(x)&#39;</span>
<span class="gp">sage:</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">=-</span><span class="n">x</span>                                                                       <span class="c1"># needs sage.symbolic</span>
<span class="gp">sage:</span> <span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                                                                         <span class="c1"># needs sage.symbolic</span>
<span class="go">-10</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a(x) =- 5&#39;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); a = symbolic_expression(- Integer(5)).function(x)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">__tmp__</span><span class="o">=</span><span class="n">var</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">);</span> <span class="n">f</span> <span class="o">=</span> <span class="n">symbolic_expression</span><span class="p">(</span><span class="o">-</span><span class="n">x</span>                                                                       <span class="p">)</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="c1"># needs sage.symbolic</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>                                                                         <span class="c1"># needs sage.symbolic</span>
<span class="go">-10</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">This involves -=, which should not be turned into a symbolic
expression (of course a(x) is not an identifier, so this will never be
valid):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a(x) -= 5&#39;</span><span class="p">)</span>
<span class="go">&#39;a(x) -= Integer(5)&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;a(x) -= 5&#39;</span><span class="p">)</span>
<span class="go">&#39;a(x) -= Integer(5)&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Raw literals:</p>
<p>Raw literals are not preparsed, which can be useful from an efficiency
point of view. In Sage raw integer and floating literals are followed
by an”r” (or “R”) for raw, meaning not preparsed.</p>
<p class="with-sage-tab with-python-tab">We create a raw integer:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">393939</span><span class="n">r</span>
<span class="gp">sage:</span> <span class="n">a</span>
<span class="go">393939</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">393939</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="go">393939</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">We create a raw float:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">1.5949</span><span class="n">r</span>
<span class="gp">sage:</span> <span class="n">z</span>
<span class="go">1.5949</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">&lt;class &#39;float&#39;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">1.5949</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">z</span>
<span class="go">1.5949</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">&lt;class &#39;float&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">You can also use an upper case letter:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">3.1415</span><span class="n">R</span>
<span class="gp">sage:</span> <span class="n">z</span>
<span class="go">3.1415</span>
<span class="gp">sage:</span> <span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">&lt;class &#39;float&#39;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">3.1415</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">z</span>
<span class="go">3.1415</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">&lt;class &#39;float&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">This next example illustrates how raw literals can be very useful in
certain cases.  We make a list of even integers up to 10000:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">v</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10000</span><span class="p">))]</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">This takes a noticeable fraction of a second (e.g., 0.25
seconds). After preparsing, what Python is really executing is the
following:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;v = [ 2*i for i in range(10000)]&#39;</span><span class="p">)</span>
<span class="go">&#39;v = [ Integer(2)*i for i in range(Integer(10000))]&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--14-input--2" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;v = [ 2*i for i in range(10000)]&#39;</span><span class="p">)</span>
<span class="go">&#39;v = [ Integer(2)*i for i in range(Integer(10000))]&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">If instead we use a raw 2 we get execution that is <em>instant</em> (0.00
seconds):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--15-input--1" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">v</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2</span><span class="n">r</span> <span class="o">*</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="n">r</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--15-input--2" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Behind the scenes what happens is the following:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--16-input--1" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;v = [ 2r * i for i in range(10000r)]&#39;</span><span class="p">)</span>
<span class="go">&#39;v = [ 2 * i for i in range(10000)]&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--16-input--2" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;v = [ 2r * i for i in range(10000r)]&#39;</span><span class="p">)</span>
<span class="go">&#39;v = [ 2 * i for i in range(10000)]&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The results of the above two expressions are different.  The
first one computes a list of Sage integers, whereas the second
creates a list of Python integers.  Python integers are typically
much more efficient than Sage integers when they are very small;
large Sage integers are much more efficient than Python integers,
since they are implemented using the GMP C library.</p>
</div>
<p>F-Strings (<a class="reference external" href="https://www.python.org/dev/peps/pep-0498/">PEP 498</a>):</p>
<p class="with-sage-tab with-python-tab">Expressions embedded within F-strings are preparsed:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--17-input--1" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;1/3&#39;</span>
<span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="mi">2</span><span class="o">^</span><span class="mi">3</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;8&#39;</span>
<span class="gp">sage:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1"> in binary is: </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">08b</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;20 in binary is: 00010100&#39;</span>
<span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">]))</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;[1, 4, 9, 16, 25]&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--17-input--2" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;1/3&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;8&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1"> in binary is: </span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">08b</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;20 in binary is: 00010100&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">ellipsis_range</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="bp">Ellipsis</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">5</span><span class="p">)))))</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;[1, 4, 9, 16, 25]&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Note that the format specifier is not preparsed. Expressions within it,
however, are:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--18-input--1" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">10r</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">ValueError: Unknown format code &#39;r&#39; for object of type &#39;int&#39;</span>
<span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:{</span><span class="mi">10</span><span class="n">r</span><span class="si">}}</span><span class="s1">&#39;</span>
<span class="go">&#39;        20&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--18-input--2" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">10r</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">ValueError: Unknown format code &#39;r&#39; for object of type &#39;int&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:{</span><span class="mi">10</span><span class="si">}}</span><span class="s1">&#39;</span>
<span class="go">&#39;        20&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Nested F-strings are also supported:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--19-input--1" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;1/2&#39;</span>
<span class="gp">sage:</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;1</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;2</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s1">&#39;4</span><span class="si">{</span><span class="w"> </span><span class="mi">2</span><span class="o">^</span><span class="mi">3</span><span class="w"> </span><span class="si">}</span><span class="s1">4&#39;</span><span class="w"> </span><span class="si">}</span><span class="s2">2&quot;</span><span class="w"> </span><span class="si">}</span><span class="s1">1&#39;&#39;&#39;</span>
<span class="go">&#39;1248421&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--19-input--2" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;1/2&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;1</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s2">&quot;2</span><span class="si">{</span><span class="w"> </span><span class="sa">f</span><span class="s1">&#39;4</span><span class="si">{</span><span class="w"> </span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="si">}</span><span class="s1">4&#39;</span><span class="w"> </span><span class="si">}</span><span class="s2">2&quot;</span><span class="w"> </span><span class="si">}</span><span class="s1">1&#39;&#39;&#39;</span>
<span class="go">&#39;1248421&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>William Stein (2006-02-19): fixed bug when loading .py files</p></li>
<li><p>William Stein (2006-03-09): fixed crash in parsing exponentials; precision of
real literals now determined by digits of input (like Mathematica)</p></li>
<li><p>Joe Wetherell (2006-04-14): added MAGMA-style constructor preparsing</p></li>
<li><p>Bobby Moretti (2007-01-25): added preliminary function assignment notation</p></li>
<li><p>Robert Bradshaw (2007-09-19): added strip_string_literals, containing_block
utility functions. Arrr!; added [1,2,..,n] notation</p></li>
<li><p>Robert Bradshaw (2008-01-04): implicit multiplication (off by default)</p></li>
<li><p>Robert Bradshaw (2008-09-23): factor out constants</p></li>
<li><p>Robert Bradshaw (2009-01): simplify preparser by making it modular and using
regular expressions; bug fixes, complex numbers, and binary input</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStack">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">QuoteStack</span></span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L332"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStack" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The preserved state of parsing in <a class="reference internal" href="#sage.repl.preparse.strip_string_literals" title="sage.repl.preparse.strip_string_literals"><code class="xref py py-func docutils literal notranslate"><span class="pre">strip_string_literals()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStack.peek">
<span class="sig-name descname"><span class="pre">peek</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L381"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStack.peek" title="Link to this definition">¶</a></dt>
<dd><p>Get the frame at the top of the stack or None if empty.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--20-input--1" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...delim=&#39;&quot;&#39;...)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--20-input--2" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...delim=&#39;&quot;&#39;...)</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStack.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L395"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStack.pop" title="Link to this definition">¶</a></dt>
<dd><p>Remove and return the frame that was most recently added to the stack.</p>
<p>Raise an <a class="reference external" href="https://docs.python.org/library/exceptions.html#IndexError" title="(in Python v3.12)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IndexError</span></code></a> if the stack is empty.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--21-input--1" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">IndexError: ...</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...delim=&#39;&quot;&#39;...)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--21-input--2" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">IndexError: ...</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...delim=&#39;&quot;&#39;...)</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStack.push">
<span class="sig-name descname"><span class="pre">push</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L414"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStack.push" title="Link to this definition">¶</a></dt>
<dd><p>Add a frame to the stack.</p>
<p>If the frame corresponds to an F-string, its delimiter is marked as no
longer being a <a class="reference internal" href="#sage.repl.preparse.QuoteStack.safe_delimiter" title="sage.repl.preparse.QuoteStack.safe_delimiter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">safe_delimiter()</span></code></a>.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--22-input--1" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">sage:</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="nb">len</span><span class="p">(</span><span class="n">qs</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--22-input--2" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">qs</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sage</span><span class="o">.</span><span class="n">repl</span><span class="o">.</span><span class="n">preparse</span><span class="o">.</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">qs</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStack.safe_delimiter">
<span class="sig-name descname"><span class="pre">safe_delimiter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L435"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStack.safe_delimiter" title="Link to this definition">¶</a></dt>
<dd><p>Return a string delimiter that may be safely inserted into the code
output by <a class="reference internal" href="#sage.repl.preparse.strip_string_literals" title="sage.repl.preparse.strip_string_literals"><code class="xref py py-func docutils literal notranslate"><span class="pre">strip_string_literals()</span></code></a>, if any.</p>
<p><code class="docutils literal notranslate"><span class="pre">'</span></code> is preferred over <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>. The triple-quoted versions are never
returned since by the time they would be chosen, they would also be invalid.
<code class="docutils literal notranslate"><span class="pre">'''</span></code> cannot, for example, appear within an F-string delimited by <code class="docutils literal notranslate"><span class="pre">'</span></code>.</p>
<p>Once marked unsafe, a delimiter is never made safe again, even after the
stack frame that used it is popped. It may no longer be applicable to parsing,
but it appears somewhere in the processed code, so it is not safe to insert
just anywhere. A future enhancement could be to map ranges in the processed
code to the delimiter(s) that would be safe to insert there.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--23-input--1" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">QuoteStack</span><span class="p">,</span> <span class="n">QuoteStackFrame</span>
<span class="gp">sage:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&quot;&#39;&quot;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&quot;&#39;&quot;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...)</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="n">f_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&#39;&quot;&#39;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">f_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--23-input--2" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">QuoteStack</span><span class="p">,</span> <span class="n">QuoteStackFrame</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">QuoteStack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&quot;&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&quot;&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">QuoteStackFrame(...)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="n">f_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span>
<span class="go">&#39;&quot;&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">QuoteStackFrame</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">f_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">safe_delimiter</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sage.repl.preparse.QuoteStackFrame">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">QuoteStackFrame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">braces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parens</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brackets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt_spec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested_fmt_spec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L475"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.QuoteStackFrame" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/types.html#types.SimpleNamespace" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code></a></p>
<p>The state of a single level of a string literal being parsed.</p>
<p>Only F-strings have more than one level.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.containing_block">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">containing_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['()',</span> <span class="pre">'[]',</span> <span class="pre">'{}']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L871"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.containing_block" title="Link to this definition">¶</a></dt>
<dd><p>Find the code block given by balanced delimiters that contains the position <code class="docutils literal notranslate"><span class="pre">idx</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">idx</span></code> – integer; a starting position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delimiters</span></code> – list of strings (default: [‘()’, ‘[]’,
‘{}’]); the delimiters to balance. A delimiter must be a single
character and no character can at the same time be opening and
closing delimiter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">require_delim</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>); whether to raise
a <a class="reference external" href="https://docs.python.org/library/exceptions.html#SyntaxError" title="(in Python v3.12)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> if delimiters are present. If the delimiters are
unbalanced, an error will be raised in any case.</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>a 2-tuple <code class="docutils literal notranslate"><span class="pre">(a,b)</span></code> of integers, such that <code class="docutils literal notranslate"><span class="pre">code[a:b]</span></code> is
delimited by balanced delimiters, <code class="docutils literal notranslate"><span class="pre">a&lt;=idx&lt;b</span></code>, and <code class="docutils literal notranslate"><span class="pre">a</span></code>
is maximal and <code class="docutils literal notranslate"><span class="pre">b</span></code> is minimal with that property. If that
does not exist, a <a class="reference external" href="https://docs.python.org/library/exceptions.html#SyntaxError" title="(in Python v3.12)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> is raised.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">require_delim</span></code> is false and <code class="docutils literal notranslate"><span class="pre">a,b</span></code> as above can not be
found, then <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">len(code)</span></code> is returned.</p></li>
</ul>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--24-input--1" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">containing_block</span>
<span class="gp">sage:</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;factor(next_prime(L[5]+1))&quot;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="p">[</span><span class="mi">22</span><span class="p">]</span>
<span class="go">&#39;+&#39;</span>
<span class="gp">sage:</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span>
<span class="go">(17, 25)</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(L[5]+1)&#39;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">sage:</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;[5]&#39;</span>
<span class="gp">sage:</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">delimiters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;()&#39;</span><span class="p">]);</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(L[5]+1)&#39;</span>
<span class="gp">sage:</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(next_prime(L[5]+1))&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--24-input--2" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">containing_block</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;factor(next_prime(L[5]+1))&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">22</span><span class="p">)]</span>
<span class="go">&#39;+&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">22</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span>
<span class="go">(17, 25)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(L[5]+1)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;[5]&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">delimiters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;()&#39;</span><span class="p">]);</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(L[5]+1)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">containing_block</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>
<span class="go">&#39;(next_prime(L[5]+1))&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.extract_numeric_literals">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">extract_numeric_literals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1076"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.extract_numeric_literals" title="Link to this definition">¶</a></dt>
<dd><p>Pulls out numeric literals and assigns them to global variables.
This eliminates the need to re-parse and create the literals,
e.g., during every iteration of a loop.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string; a block of code</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>a (string, string:string dictionary) 2-tuple; the block with
literals replaced by variable names and a mapping from names to
the new variables</p></li>
</ul>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--25-input--1" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">extract_numeric_literals</span>
<span class="gp">sage:</span> <span class="n">code</span><span class="p">,</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.2 + 5&quot;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="nb">print</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="go">_sage_const_1p2  + _sage_const_5</span>
<span class="gp">sage:</span> <span class="nb">print</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
<span class="go">{&#39;_sage_const_1p2&#39;: &quot;RealNumber(&#39;1.2&#39;)&quot;, &#39;_sage_const_5&#39;: &#39;Integer(5)&#39;}</span>

<span class="gp">sage:</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;[1, 1.1, 1e1, -1e-1, 1.]&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;[_sage_const_1 , _sage_const_1p1 , _sage_const_1e1 , -_sage_const_1en1 , _sage_const_1p ]&#39;</span>

<span class="gp">sage:</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;[1.sqrt(), 1.2.sqrt(), 1r, 1.2r, R.1, R0.1, (1..5)]&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;[_sage_const_1 .sqrt(), _sage_const_1p2 .sqrt(), 1 , 1.2 , R.1, R0.1, (_sage_const_1 .._sage_const_5 )]&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--25-input--2" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">extract_numeric_literals</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">code</span><span class="p">,</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.2 + 5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="go">_sage_const_1p2  + _sage_const_5</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
<span class="go">{&#39;_sage_const_1p2&#39;: &quot;RealNumber(&#39;1.2&#39;)&quot;, &#39;_sage_const_5&#39;: &#39;Integer(5)&#39;}</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;[1, 1.1, 1e1, -1e-1, 1.]&quot;</span><span class="p">)[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
<span class="go">&#39;[_sage_const_1 , _sage_const_1p1 , _sage_const_1e1 , -_sage_const_1en1 , _sage_const_1p ]&#39;</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">extract_numeric_literals</span><span class="p">(</span><span class="s2">&quot;[1.sqrt(), 1.2.sqrt(), 1r, 1.2r, R.1, R0.1, (1..5)]&quot;</span><span class="p">)[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
<span class="go">&#39;[_sage_const_1 .sqrt(), _sage_const_1p2 .sqrt(), 1 , 1.2 , R.1, R0.1, (_sage_const_1 .._sage_const_5 )]&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.handle_encoding_declaration">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">handle_encoding_declaration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L2074"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.handle_encoding_declaration" title="Link to this definition">¶</a></dt>
<dd><p>Find a PEP 263-style Python encoding declaration in the first or
second line of <code class="docutils literal notranslate"><span class="pre">contents</span></code>. If found, output it to <code class="docutils literal notranslate"><span class="pre">out</span></code> and return
<code class="docutils literal notranslate"><span class="pre">contents</span></code> without the encoding line; otherwise output a default
UTF-8 declaration and return <code class="docutils literal notranslate"><span class="pre">contents</span></code>.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--26-input--1" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">handle_encoding_declaration</span>
<span class="gp">sage:</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">sage:</span> <span class="n">c1</span><span class="o">=</span><span class="s1">&#39;# -*- coding: latin-1 -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">sage:</span> <span class="n">c2</span><span class="o">=</span><span class="s1">&#39;# -*- coding: iso-8859-15 -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">sage:</span> <span class="n">c3</span><span class="o">=</span><span class="s1">&#39;# -*- coding: ascii -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">sage:</span> <span class="n">c4</span><span class="o">=</span><span class="s1">&#39;import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">sage:</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: latin-1 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">sage:</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: iso-8859-15 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">sage:</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c3</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: ascii -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">sage:</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c4</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: utf-8 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--26-input--2" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">handle_encoding_declaration</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">c1</span><span class="o">=</span><span class="s1">&#39;# -*- coding: latin-1 -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">=</span><span class="s1">&#39;# -*- coding: iso-8859-15 -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">c3</span><span class="o">=</span><span class="s1">&#39;# -*- coding: ascii -*-</span><span class="se">\n</span><span class="s1">import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">c4</span><span class="o">=</span><span class="s1">&#39;import os, sys</span><span class="se">\n</span><span class="s1">...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: latin-1 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: iso-8859-15 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c3</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: ascii -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">handle_encoding_declaration</span><span class="p">(</span><span class="n">c4</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go"># -*- coding: utf-8 -*-</span>
<span class="go">&#39;import os, sys\n...&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0263/"><strong>PEP 263</strong></a> says that Python will interpret a UTF-8
byte order mark as a declaration of UTF-8 encoding, but I do not
think we do that; this function only sees a Python string so it
cannot account for a BOM.</p></li>
<li><p>We default to UTF-8 encoding even though PEP 263 says that
Python files should default to ASCII.</p></li>
<li><p>Also see <a class="reference external" href="https://docs.python.org/ref/encodings.html">https://docs.python.org/ref/encodings.html</a>.</p></li>
</ul>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Lars Fischer</p></li>
<li><p>Dan Drake (2010-12-08, rewrite for <a class="extlink-issue reference external" href="https://github.com/sagemath/sage/issues/10440">Issue #10440</a>)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.implicit_mul">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">implicit_mul</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1952"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.implicit_mul" title="Link to this definition">¶</a></dt>
<dd><p>Insert *’s to make implicit multiplication explicit.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string; the code with missing *’s</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code> – integer (default: 5); see <a class="reference internal" href="#sage.repl.preparse.implicit_multiplication" title="sage.repl.preparse.implicit_multiplication"><code class="xref py py-func docutils literal notranslate"><span class="pre">implicit_multiplication()</span></code></a>
for a list</p></li>
</ul>
<p>OUTPUT: string</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--27-input--1" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">implicit_mul</span>
<span class="gp">sage:</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;(2x^2-4x+3)a0&#39;</span><span class="p">)</span>
<span class="go">&#39;(2*x^2-4*x+3)*a0&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;a b c in L&#39;</span><span class="p">)</span>
<span class="go">&#39;a*b*c in L&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;1r + 1e3 + 5exp(2)&#39;</span><span class="p">)</span>
<span class="go">&#39;1r + 1e3 + 5*exp(2)&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;f(a)(b)&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&#39;f(a)*(b)&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--27-input--2" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">implicit_mul</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;(2x^2-4x+3)a0&#39;</span><span class="p">)</span>
<span class="go">&#39;(2*x^2-4*x+3)*a0&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;a b c in L&#39;</span><span class="p">)</span>
<span class="go">&#39;a*b*c in L&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;1r + 1e3 + 5exp(2)&#39;</span><span class="p">)</span>
<span class="go">&#39;1r + 1e3 + 5*exp(2)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_mul</span><span class="p">(</span><span class="s1">&#39;f(a)(b)&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">Integer</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">&#39;f(a)*(b)&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.implicit_multiplication">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">implicit_multiplication</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L250"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.implicit_multiplication" title="Link to this definition">¶</a></dt>
<dd><p>Turn implicit multiplication on or off, optionally setting a
specific <code class="docutils literal notranslate"><span class="pre">level</span></code>.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code> – boolean or integer (default: 5); how aggressive to be in
placing *’s</p>
<ul>
<li><p>0 – Do nothing</p></li>
<li><p>1 – Numeric followed by alphanumeric</p></li>
<li><p>2 – Closing parentheses followed by alphanumeric</p></li>
<li><p>3 – Spaces between alphanumeric</p></li>
<li><p>10 – Adjacent parentheses (may mangle call statements)</p></li>
</ul>
</li>
</ul>
<p>OUTPUT: the current <code class="docutils literal notranslate"><span class="pre">level</span></code> if no argument is given</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--28-input--1" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2x&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)*x&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2x&#39;</span><span class="p">)</span>
<span class="go">&#39;2x&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--28-input--2" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2x&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(2)*x&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;2x&#39;</span><span class="p">)</span>
<span class="go">&#39;2x&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Note that the <a class="reference external" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-automagic">IPython automagic</a>
feature cannot be used if <code class="docutils literal notranslate"><span class="pre">level</span> <span class="pre">&gt;=</span> <span class="pre">3</span></code>:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--29-input--1" name="tab-set--29" type="radio"><label class="tab-label" for="tab-set--29-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;cd Documents&#39;</span><span class="p">)</span>
<span class="go">&#39;cd*Documents&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;cd Documents&#39;</span><span class="p">)</span>
<span class="go">&#39;cd Documents&#39;</span>
<span class="gp">sage:</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--29-input--2" name="tab-set--29" type="radio"><label class="tab-label" for="tab-set--29-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;cd Documents&#39;</span><span class="p">)</span>
<span class="go">&#39;cd*Documents&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s1">&#39;cd Documents&#39;</span><span class="p">)</span>
<span class="go">&#39;cd Documents&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">implicit_multiplication</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In this case, one can use the explicit syntax for IPython magics such as
<code class="docutils literal notranslate"><span class="pre">%cd</span> <span class="pre">Documents</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.in_quote">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">in_quote</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L328"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.in_quote" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.isalphadigit_">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">isalphadigit_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L303"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.isalphadigit_" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="docutils literal notranslate"><span class="pre">s</span></code> is a non-empty string of alphabetic characters
or a non-empty string of digits or just a single <code class="docutils literal notranslate"><span class="pre">_</span></code></p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--30-input--1" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">isalphadigit_</span>
<span class="gp">sage:</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage:</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;a123&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--30-input--2" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">isalphadigit_</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">isalphadigit_</span><span class="p">(</span><span class="s1">&#39;a123&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.parse_ellipsis">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">parse_ellipsis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preparse_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1012"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.parse_ellipsis" title="Link to this definition">¶</a></dt>
<dd><p>Preparses [0,2,..,n] notation.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">preparse_step</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
</ul>
<p>OUTPUT: string</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--31-input--1" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">parse_ellipsis</span>
<span class="gp">sage:</span> <span class="n">parse_ellipsis</span><span class="p">(</span><span class="s2">&quot;[1,2,..,n]&quot;</span><span class="p">)</span>
<span class="go">&#39;(ellipsis_range(1,2,Ellipsis,n))&#39;</span>
<span class="gp">sage:</span> <span class="n">parse_ellipsis</span><span class="p">(</span><span class="s2">&quot;for i in (f(x) .. L[10]):&quot;</span><span class="p">)</span>
<span class="go">&#39;for i in (ellipsis_iter(f(x) ,Ellipsis, L[10])):&#39;</span>
<span class="gp">sage:</span> <span class="p">[</span><span class="mf">1.0</span><span class="o">.</span><span class="mf">.2.0</span><span class="p">]</span>                                                                <span class="c1"># needs sage.rings.real_mpfr</span>
<span class="go">[1.00000000000000, 2.00000000000000]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--31-input--2" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">parse_ellipsis</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parse_ellipsis</span><span class="p">(</span><span class="s2">&quot;[1,2,..,n]&quot;</span><span class="p">)</span>
<span class="go">&#39;(ellipsis_range(1,2,Ellipsis,n))&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">parse_ellipsis</span><span class="p">(</span><span class="s2">&quot;for i in (f(x) .. L[10]):&quot;</span><span class="p">)</span>
<span class="go">&#39;for i in (ellipsis_iter(f(x) ,Ellipsis, L[10])):&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">ellipsis_range</span><span class="p">(</span><span class="n">RealNumber</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">),</span><span class="bp">Ellipsis</span><span class="p">,</span><span class="n">RealNumber</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)))</span>                                                                <span class="c1"># needs sage.rings.real_mpfr</span>
<span class="go">[1.00000000000000, 2.00000000000000]</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_prompts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_literals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1678"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse" title="Link to this definition">¶</a></dt>
<dd><p>Preparse a line of input.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">line</span></code> – string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do_time</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_prompts</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numeric_literals</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
</ul>
<p>OUTPUT: string</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--32-input--1" name="tab-set--32" type="radio"><label class="tab-label" for="tab-set--32-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = ZZ[&#39;x&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;x&#39;]; (x,) = ZZ._first_ngens(1)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = ZZ[&#39;y&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;y&#39;]; (x,) = ZZ._first_ngens(1)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x,y&gt; = ZZ[]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;x, y&#39;]; (x, y,) = ZZ._first_ngens(2)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x,y&gt; = ZZ[&#39;u,v&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;u,v&#39;]; (x, y,) = ZZ._first_ngens(2)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = QQ[2^(1/3)]&quot;</span><span class="p">)</span>
<span class="go">&#39;ZZ = QQ[Integer(2)**(Integer(1)/Integer(3))]; (x,) = ZZ._first_ngens(1)&#39;</span>
<span class="gp">sage:</span> <span class="n">QQ</span><span class="p">[</span><span class="mi">2</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)]</span>                                                               <span class="c1"># needs fpylll sage.rings.number_field sage.symbolic</span>
<span class="go">Number Field in a with defining polynomial x^3 - 2 with a = 1.259921049894873?</span>

<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a^b&quot;</span><span class="p">)</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a^^b&quot;</span><span class="p">)</span>
<span class="go">&#39;a^b&#39;</span>
<span class="gp">sage:</span> <span class="mi">8</span><span class="o">^</span><span class="mi">1</span>
<span class="go">8</span>
<span class="gp">sage:</span> <span class="mi">8</span><span class="o">^^</span><span class="mi">1</span>
<span class="go">9</span>
<span class="gp">sage:</span> <span class="mi">9</span><span class="o">^^</span><span class="mi">1</span>
<span class="go">8</span>

<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;A </span><span class="se">\\</span><span class="s2"> B&quot;</span><span class="p">)</span>
<span class="go">&#39;A  * BackslashOperator() * B&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;A^2 </span><span class="se">\\</span><span class="s2"> B + C&quot;</span><span class="p">)</span>
<span class="go">&#39;A**Integer(2)  * BackslashOperator() * B + C&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a </span><span class="se">\\</span><span class="s2"> b </span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># There is really only one backslash here, it is just being escaped.</span>
<span class="go">&#39;a  * BackslashOperator() * b \\&#39;</span>

<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;time R.&lt;x&gt; = ZZ[]&quot;</span><span class="p">,</span> <span class="n">do_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;__time__ = cputime(); __wall__ = walltime(); R = ZZ[\&#39;x\&#39;]; print(&quot;Time: CPU {:.2f} s, Wall: {:.2f} s&quot;.format(cputime(__time__), walltime(__wall__))); (x,) = R._first_ngens(1)&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--32-input--2" name="tab-set--32" type="radio"><label class="tab-label" for="tab-set--32-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = ZZ[&#39;x&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;x&#39;]; (x,) = ZZ._first_ngens(1)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = ZZ[&#39;y&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;y&#39;]; (x,) = ZZ._first_ngens(1)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x,y&gt; = ZZ[]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;x, y&#39;]; (x, y,) = ZZ._first_ngens(2)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x,y&gt; = ZZ[&#39;u,v&#39;]&quot;</span><span class="p">)</span>
<span class="go">&quot;ZZ = ZZ[&#39;u,v&#39;]; (x, y,) = ZZ._first_ngens(2)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;ZZ.&lt;x&gt; = QQ[2^(1/3)]&quot;</span><span class="p">)</span>
<span class="go">&#39;ZZ = QQ[Integer(2)**(Integer(1)/Integer(3))]; (x,) = ZZ._first_ngens(1)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">QQ</span><span class="p">[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">Integer</span><span class="p">(</span><span class="mi">3</span><span class="p">))]</span>                                                               <span class="c1"># needs fpylll sage.rings.number_field sage.symbolic</span>
<span class="go">Number Field in a with defining polynomial x^3 - 2 with a = 1.259921049894873?</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a^b&quot;</span><span class="p">)</span>
<span class="go">&#39;a**b&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a^^b&quot;</span><span class="p">)</span>
<span class="go">&#39;a^b&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">**</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">^</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">^</span><span class="n">Integer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">8</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;A </span><span class="se">\\</span><span class="s2"> B&quot;</span><span class="p">)</span>
<span class="go">&#39;A  * BackslashOperator() * B&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;A^2 </span><span class="se">\\</span><span class="s2"> B + C&quot;</span><span class="p">)</span>
<span class="go">&#39;A**Integer(2)  * BackslashOperator() * B + C&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;a </span><span class="se">\\</span><span class="s2"> b </span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># There is really only one backslash here, it is just being escaped.</span>
<span class="go">&#39;a  * BackslashOperator() * b \\&#39;</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;time R.&lt;x&gt; = ZZ[]&quot;</span><span class="p">,</span> <span class="n">do_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;__time__ = cputime(); __wall__ = walltime(); R = ZZ[\&#39;x\&#39;]; print(&quot;Time: CPU {:.2f} s, Wall: {:.2f} s&quot;.format(cputime(__time__), walltime(__wall__))); (x,) = R._first_ngens(1)&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_calculus">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_calculus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1373"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_calculus" title="Link to this definition">¶</a></dt>
<dd><p>Supports calculus-like function assignment, e.g., transforms:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">f(x,y,z) = sin(x^3 - 4*y) + y^x</span>
</pre></div>
</div>
<p>into:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">__tmp__=var(&quot;x,y,z&quot;)</span>
<span class="go">f = symbolic_expression(sin(x**3 - 4*y) + y**x).function(x,y,z)</span>
</pre></div>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>Bobby Moretti</p>
<ul>
<li><p>Initial version - 02/2007</p></li>
</ul>
</li>
<li><p>William Stein</p>
<ul>
<li><p>Make variables become defined if they are not already defined.</p></li>
</ul>
</li>
<li><p>Robert Bradshaw</p>
<ul>
<li><p>Rewrite using regular expressions (01/2009)</p></li>
</ul>
</li>
</ul>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--33-input--1" name="tab-set--33" type="radio"><label class="tab-label" for="tab-set--33-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) = x^3-x&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); f = symbolic_expression(x**Integer(3)-x).function(x)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(u,v) = u - v&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;u,v&quot;); f = symbolic_expression(u - v).function(u,v)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) =-5&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); f = symbolic_expression(-Integer(5)).function(x)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) -= 5&quot;</span><span class="p">)</span>
<span class="go">&#39;f(x) -= Integer(5)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x_1, x_2) = x_1^2 - x_2^2&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x_1,x_2&quot;); f = symbolic_expression(x_1**Integer(2) - x_2**Integer(2)).function(x_1,x_2)&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--33-input--2" name="tab-set--33" type="radio"><label class="tab-label" for="tab-set--33-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) = x^3-x&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); f = symbolic_expression(x**Integer(3)-x).function(x)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(u,v) = u - v&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;u,v&quot;); f = symbolic_expression(u - v).function(u,v)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) =-5&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x&quot;); f = symbolic_expression(-Integer(5)).function(x)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x) -= 5&quot;</span><span class="p">)</span>
<span class="go">&#39;f(x) -= Integer(5)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse</span><span class="p">(</span><span class="s2">&quot;f(x_1, x_2) = x_1^2 - x_2^2&quot;</span><span class="p">)</span>
<span class="go">&#39;__tmp__=var(&quot;x_1,x_2&quot;); f = symbolic_expression(x_1**Integer(2) - x_2**Integer(2)).function(x_1,x_2)&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">For simplicity, this function assumes all statements begin and end
with a semicolon:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--34-input--1" name="tab-set--34" type="radio"><label class="tab-label" for="tab-set--34-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_calculus</span>
<span class="gp">sage:</span> <span class="n">preparse_calculus</span><span class="p">(</span><span class="s2">&quot;;f(t,s)=t^2;&quot;</span><span class="p">)</span>
<span class="go">&#39;;__tmp__=var(&quot;t,s&quot;); f = symbolic_expression(t^2).function(t,s);&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_calculus</span><span class="p">(</span><span class="s2">&quot;;f( t , s ) = t^2;&quot;</span><span class="p">)</span>
<span class="go">&#39;;__tmp__=var(&quot;t,s&quot;); f = symbolic_expression(t^2).function(t,s);&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--34-input--2" name="tab-set--34" type="radio"><label class="tab-label" for="tab-set--34-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_calculus</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_calculus</span><span class="p">(</span><span class="s2">&quot;;f(t,s)=t^2;&quot;</span><span class="p">)</span>
<span class="go">&#39;;__tmp__=var(&quot;t,s&quot;); f = symbolic_expression(t^2).function(t,s);&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_calculus</span><span class="p">(</span><span class="s2">&quot;;f( t , s ) = t^2;&quot;</span><span class="p">)</span>
<span class="go">&#39;;__tmp__=var(&quot;t,s&quot;); f = symbolic_expression(t^2).function(t,s);&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_file">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_literals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1861"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_file" title="Link to this definition">¶</a></dt>
<dd><p>Preparse <code class="docutils literal notranslate"><span class="pre">contents</span></code> which is input from a file such as <code class="docutils literal notranslate"><span class="pre">.sage</span></code> files.</p>
<p>Special attentions are given to numeric literals and load/attach
file directives.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Temporarily, if &#64;parallel is in the input, then
numeric_literals is always set to False.</p>
</div>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contents</span></code> – string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">globals</span></code> – dictionary or <code class="docutils literal notranslate"><span class="pre">None</span></code> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>); if given, then
arguments to load/attach are evaluated in the namespace of this dictionary</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numeric_literals</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">True</span></code>); whether to factor
out wrapping of integers and floats, so they do not get created
repeatedly inside loops</p></li>
</ul>
<p>OUTPUT: string</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_file_named">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_file_named</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L2196"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_file_named" title="Link to this definition">¶</a></dt>
<dd><p>Preparse file named <code class="docutils literal notranslate"><span class="pre">name</span></code> (presumably a <code class="docutils literal notranslate"><span class="pre">.sage</span></code> file),
outputting to a temporary file.</p>
<p>This returns the temporary file as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object.</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--35-input--1" name="tab-set--35" type="radio"><label class="tab-label" for="tab-set--35-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_file_named</span>
<span class="gp">sage:</span> <span class="n">tmpf</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.sage&#39;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmpf</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">....:</span>     <span class="n">out</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a = 2&quot;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">preparse_file_named</span><span class="p">(</span><span class="n">tmpf</span><span class="p">)</span>
<span class="go">PosixPath(&#39;...sage.py&#39;)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--35-input--2" name="tab-set--35" type="radio"><label class="tab-label" for="tab-set--35-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_file_named</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">tmpf</span> <span class="o">=</span> <span class="n">tmp_filename</span><span class="p">(</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;.sage&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmpf</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">...</span>     <span class="n">out</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a = 2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_file_named</span><span class="p">(</span><span class="n">tmpf</span><span class="p">)</span>
<span class="go">PosixPath(&#39;...sage.py&#39;)</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_file_named_to_stream">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_file_named_to_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L2181"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_file_named_to_stream" title="Link to this definition">¶</a></dt>
<dd><p>Preparse file named code{name} (presumably a .sage file), outputting to
stream code{out}.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_generators">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_generators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1496"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_generators" title="Link to this definition">¶</a></dt>
<dd><p>Parse generator syntax, converting:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">obj.&lt;gen0,gen1,...,genN&gt; = objConstructor(...)</span>
</pre></div>
</div>
<p>into:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">obj = objConstructor(..., names=(&quot;gen0&quot;, &quot;gen1&quot;, ..., &quot;genN&quot;))</span>
<span class="go">(gen0, gen1, ..., genN,) = obj.gens()</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">obj.&lt;gen0,gen1,...,genN&gt; = R[interior]</span>
</pre></div>
</div>
<p>into:</p>
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="go">obj = R[interior]; (gen0, gen1, ..., genN,) = obj.gens()</span>
</pre></div>
</div>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string</p></li>
</ul>
<p>OUTPUT: string</p>
<p>LIMITATIONS:</p>
<blockquote>
<div><ul class="simple">
<li><p>The entire constructor <em>must</em> be on one line.</p></li>
</ul>
</div></blockquote>
<p>AUTHORS:</p>
<ul class="simple">
<li><p>2006-04-14: Joe Wetherell (<a class="reference external" href="mailto:jlwether&#37;&#52;&#48;alum&#46;mit&#46;edu">jlwether<span>&#64;</span>alum<span>&#46;</span>mit<span>&#46;</span>edu</a>)</p>
<ul>
<li><p>Initial version.</p></li>
</ul>
</li>
<li><p>2006-04-17: William Stein</p>
<ul>
<li><p>Improvements to allow multiple statements.</p></li>
</ul>
</li>
<li><p>2006-05-01: William</p>
<ul>
<li><p>Fix bug that Joe found.</p></li>
</ul>
</li>
<li><p>2006-10-31: William</p>
<ul>
<li><p>Fix so obj does not have to be mutated.</p></li>
</ul>
</li>
<li><p>2009-01-27: Robert Bradshaw</p>
<ul>
<li><p>Rewrite using regular expressions</p></li>
</ul>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.preparse_numeric_literals">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">preparse_numeric_literals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quotes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">&quot;'&quot;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1113"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.preparse_numeric_literals" title="Link to this definition">¶</a></dt>
<dd><p>Preparse numerical literals into their Sage counterparts,
e.g. Integer, RealNumber, and ComplexNumber.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string; a code block to preparse</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extract</span></code> – boolean (default: <code class="docutils literal notranslate"><span class="pre">False</span></code>); whether to create
names for the literals and return a dictionary of
name-construction pairs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quotes</span></code> – string (default: <code class="docutils literal notranslate"><span class="pre">&quot;'&quot;</span></code>); used to surround string
arguments to RealNumber and ComplexNumber. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, will rebuild
the string using a list of its Unicode code-points.</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>a string or (string, string:string dictionary) 2-tuple; the
preparsed block and, if <code class="docutils literal notranslate"><span class="pre">extract</span></code> is True, the
name-construction mapping</p></li>
</ul>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--36-input--1" name="tab-set--36" type="radio"><label class="tab-label" for="tab-set--36-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_numeric_literals</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(5)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5jr&quot;</span><span class="p">)</span>
<span class="go">&#39;5J&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5l&quot;</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5L&quot;</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.5&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1.5&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;1.5&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;.5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;.5&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5e9j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5e9&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;5.&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5.&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.foo()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(5).foo()&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.5.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;5.5&#39;).foo()&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.5j.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5.5&#39;).foo()&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5j.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5&#39;).foo()&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.exp()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(1).exp()&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1e+10&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1e+10&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;0x0af&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x0af)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;0x10.sqrt()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x10).sqrt()&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0o100&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0o100)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0b111001&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0b111001)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xe&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0xe)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xEAR&#39;</span><span class="p">)</span>
<span class="go">&#39;0xEA&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0x1012Fae&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x1012Fae)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;042&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(42)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;000042&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(42)&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--36-input--2" name="tab-set--36" type="radio"><label class="tab-label" for="tab-set--36-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">preparse_numeric_literals</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(5)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5jr&quot;</span><span class="p">)</span>
<span class="go">&#39;5J&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5l&quot;</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5L&quot;</span><span class="p">)</span>
<span class="go">&#39;5&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.5&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1.5&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;1.5&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;.5j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;.5&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5e9j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5e9&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;5.&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.j&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5.&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.foo()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(5).foo()&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.5.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;5.5&#39;).foo()&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5.5j.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5.5&#39;).foo()&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;5j.foo()&quot;</span><span class="p">)</span>
<span class="go">&quot;ComplexNumber(0, &#39;5&#39;).foo()&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1.exp()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(1).exp()&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;1e+10&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1e+10&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;0x0af&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x0af)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s2">&quot;0x10.sqrt()&quot;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x10).sqrt()&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0o100&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0o100)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0b111001&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0b111001)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xe&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0xe)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xEAR&#39;</span><span class="p">)</span>
<span class="go">&#39;0xEA&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0x1012Fae&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0x1012Fae)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;042&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(42)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;000042&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(42)&#39;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Test underscores as digit separators (PEP 515,
<a class="reference external" href="https://www.python.org/dev/peps/pep-0515/">https://www.python.org/dev/peps/pep-0515/</a>):</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--37-input--1" name="tab-set--37" type="radio"><label class="tab-label" for="tab-set--37-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123_456&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(123_456)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123_456.78_9_0&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;123_456.78_9_0&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0b11_011&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0b11_011)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0o76_321&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0o76_321)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xaa_aaa&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0xaa_aaa)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;1_3.2_5e-2_2&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1_3.2_5e-2_2&#39;)&quot;</span>

<span class="gp">sage:</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;1_1.&quot;</span><span class="p">,</span> <span class="s2">&quot;11_2.&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1e1_1&quot;</span><span class="p">,</span>
<span class="gp">....:</span>           <span class="s2">&quot;1e12_3&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1_3e1_2&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1e1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.e1_1&quot;</span><span class="p">,</span>
<span class="gp">....:</span>           <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1.0&quot;</span><span class="p">]:</span>
<span class="gp">....:</span>     <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">....:</span>     <span class="k">assert</span> <span class="n">preparse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">f</span>
<span class="go">&quot;RealNumber(&#39;1_1.&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;11_2.&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1e12_3&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.1_3e1_2&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1e1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.0&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1.0&#39;)&quot;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--37-input--2" name="tab-set--37" type="radio"><label class="tab-label" for="tab-set--37-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123_456&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(123_456)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123_456.78_9_0&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;123_456.78_9_0&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0b11_011&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0b11_011)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0o76_321&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0o76_321)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;0xaa_aaa&#39;</span><span class="p">)</span>
<span class="go">&#39;Integer(0xaa_aaa)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;1_3.2_5e-2_2&#39;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;1_3.2_5e-2_2&#39;)&quot;</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;1_1.&quot;</span><span class="p">,</span> <span class="s2">&quot;11_2.&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;.1e1_1&quot;</span><span class="p">,</span>
<span class="gp">...</span>           <span class="s2">&quot;1e12_3&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.1_3e1_2&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1e1_1&quot;</span><span class="p">,</span> <span class="s2">&quot;1e1&quot;</span><span class="p">,</span> <span class="s2">&quot;1.e1_1&quot;</span><span class="p">,</span>
<span class="gp">...</span>           <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;1_1.0&quot;</span><span class="p">]:</span>
<span class="gp">...</span>     <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>     <span class="k">assert</span> <span class="n">preparse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="n">f</span><span class="p">),</span> <span class="n">f</span>
<span class="go">&quot;RealNumber(&#39;1_1.&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;11_2.&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;.1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1e12_3&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.1_3e1_2&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1e1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.e1_1&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1.0&#39;)&quot;</span>
<span class="go">&quot;RealNumber(&#39;1_1.0&#39;)&quot;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Having consecutive underscores is not valid Python syntax, so
it is not preparsed, and similarly with a trailing underscore:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--38-input--1" name="tab-set--38" type="radio"><label class="tab-label" for="tab-set--38-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123__45&#39;</span><span class="p">)</span>
<span class="go">&#39;123__45&#39;</span>
<span class="gp">sage:</span> <span class="mi">123</span><span class="n">__45</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>

<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3040_1_&#39;</span><span class="p">)</span>
<span class="go">&#39;3040_1_&#39;</span>
<span class="gp">sage:</span> <span class="mi">3040_1</span><span class="n">_</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--38-input--2" name="tab-set--38" type="radio"><label class="tab-label" for="tab-set--38-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;123__45&#39;</span><span class="p">)</span>
<span class="go">&#39;123__45&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="mi">123</span><span class="n">__45</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>

<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3040_1_&#39;</span><span class="p">)</span>
<span class="go">&#39;3040_1_&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="mi">3040_1</span><span class="n">_</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">...</span>
<span class="go">SyntaxError: invalid ...</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Using the <code class="docutils literal notranslate"><span class="pre">quotes</span></code> parameter:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--39-input--1" name="tab-set--39" type="radio"><label class="tab-label" for="tab-set--39-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;5j&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
<span class="go">&#39;ComplexNumber(0, &quot;5&quot;)&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3.14&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="s2">&quot;&#39;&#39;&#39;&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;&#39;&#39;3.14&#39;&#39;&#39;)&quot;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3.14&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;RealNumber(str().join(map(chr, [51, 46, 49, 52])))&#39;</span>
<span class="gp">sage:</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;5j&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;ComplexNumber(0, str().join(map(chr, [53])))&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--39-input--2" name="tab-set--39" type="radio"><label class="tab-label" for="tab-set--39-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;5j&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
<span class="go">&#39;ComplexNumber(0, &quot;5&quot;)&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3.14&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="s2">&quot;&#39;&#39;&#39;&quot;</span><span class="p">)</span>
<span class="go">&quot;RealNumber(&#39;&#39;&#39;3.14&#39;&#39;&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;3.14&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;RealNumber(str().join(map(chr, [51, 46, 49, 52])))&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">preparse_numeric_literals</span><span class="p">(</span><span class="s1">&#39;5j&#39;</span><span class="p">,</span> <span class="n">quotes</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;ComplexNumber(0, str().join(map(chr, [53])))&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.strip_prompts">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">strip_prompts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L1346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.strip_prompts" title="Link to this definition">¶</a></dt>
<dd><p>Remove leading sage: and &gt;&gt;&gt; prompts so that pasting of examples
from the documentation works.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">line</span></code> – string to process</p></li>
</ul>
<p>OUTPUT: string stripped of leading prompts</p>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--40-input--1" name="tab-set--40" type="radio"><label class="tab-label" for="tab-set--40-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">strip_prompts</span>
<span class="gp">sage:</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;sage: 2 + 2&quot;</span><span class="p">)</span>
<span class="go">&#39;2 + 2&#39;</span>
<span class="gp">sage:</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt;   3 + 2&quot;</span><span class="p">)</span>
<span class="go">&#39;3 + 2&#39;</span>
<span class="gp">sage:</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;  2 + 4&quot;</span><span class="p">)</span>
<span class="go">&#39;  2 + 4&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--40-input--2" name="tab-set--40" type="radio"><label class="tab-label" for="tab-set--40-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">strip_prompts</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;sage: 2 + 2&quot;</span><span class="p">)</span>
<span class="go">&#39;2 + 2&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt;   3 + 2&quot;</span><span class="p">)</span>
<span class="go">&#39;3 + 2&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">strip_prompts</span><span class="p">(</span><span class="s2">&quot;  2 + 4&quot;</span><span class="p">)</span>
<span class="go">&#39;  2 + 4&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sage.repl.preparse.strip_string_literals">
<span class="sig-prename descclassname"><span class="pre">sage.repl.preparse.</span></span><span class="sig-name descname"><span class="pre">strip_string_literals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/passagemath/passagemath/blob/main/src/sage/repl/preparse.py#L522"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sage.repl.preparse.strip_string_literals" title="Link to this definition">¶</a></dt>
<dd><p>Return a string with all literal quotes replaced with labels and
a dictionary of labels for re-substitution.</p>
<p>This makes parsing easier.</p>
<p>INPUT:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code> – string; the input</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code> – a <a class="reference internal" href="#sage.repl.preparse.QuoteStack" title="sage.repl.preparse.QuoteStack"><code class="xref py py-class docutils literal notranslate"><span class="pre">QuoteStack</span></code></a> (default: <code class="docutils literal notranslate"><span class="pre">None</span></code>); state with which to
continue processing, e.g., across multiple calls to this function</p></li>
</ul>
<p>OUTPUT:</p>
<ul class="simple">
<li><p>a 3-tuple of the processed code, the dictionary of labels, and
any accumulated state</p></li>
</ul>
<p class="with-sage-tab with-python-tab">EXAMPLES:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--41-input--1" name="tab-set--41" type="radio"><label class="tab-label" for="tab-set--41-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">strip_string_literals</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;[&#39;a&#39;, &quot;b&quot;, &#39;c&#39;, &quot;d\&quot;&quot;]&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">s</span>
<span class="go">&#39;[%(L1)s, %(L2)s, %(L3)s, %(L4)s]&#39;</span>
<span class="gp">sage:</span> <span class="n">literals</span>
<span class="go">{&#39;L1&#39;: &quot;&#39;a&#39;&quot;, &#39;L2&#39;: &#39;&quot;b&quot;&#39;, &#39;L3&#39;: &quot;&#39;c&#39;&quot;, &#39;L4&#39;: &#39;&quot;d\\&quot;&quot;&#39;}</span>
<span class="gp">sage:</span> <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="n">literals</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &quot;b&quot;, &#39;c&#39;, &quot;d\&quot;&quot;]</span>
<span class="gp">sage:</span> <span class="nb">print</span><span class="p">(</span><span class="n">strip_string_literals</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;-&quot;</span><span class="se">\\</span><span class="s1">\&quot;&quot;-&quot;</span><span class="se">\\</span><span class="s1">&quot;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">-%(L1)s-%(L2)s-</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--41-input--2" name="tab-set--41" type="radio"><label class="tab-label" for="tab-set--41-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.repl.preparse</span> <span class="kn">import</span> <span class="n">strip_string_literals</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;[&#39;a&#39;, &quot;b&quot;, &#39;c&#39;, &quot;d\&quot;&quot;]&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="go">&#39;[%(L1)s, %(L2)s, %(L3)s, %(L4)s]&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">literals</span>
<span class="go">{&#39;L1&#39;: &quot;&#39;a&#39;&quot;, &#39;L2&#39;: &#39;&quot;b&quot;&#39;, &#39;L3&#39;: &quot;&#39;c&#39;&quot;, &#39;L4&#39;: &#39;&quot;d\\&quot;&quot;&#39;}</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="n">literals</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &quot;b&quot;, &#39;c&#39;, &quot;d\&quot;&quot;]</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">strip_string_literals</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;-&quot;</span><span class="se">\\</span><span class="s1">\&quot;&quot;-&quot;</span><span class="se">\\</span><span class="s1">&quot;-&#39;</span><span class="p">)[</span><span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
<span class="go">-%(L1)s-%(L2)s-</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Triple-quotes are handled as well:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--42-input--1" name="tab-set--42" type="radio"><label class="tab-label" for="tab-set--42-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s2">&quot;[a, &#39;&#39;&#39;b&#39;&#39;&#39;, c, &#39;&#39;]&quot;</span><span class="p">)</span>
<span class="gp">sage:</span> <span class="n">s</span>
<span class="go">&#39;[a, %(L1)s, c, %(L2)s]&#39;</span>
<span class="gp">sage:</span> <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="n">literals</span><span class="p">)</span>
<span class="go">[a, &#39;&#39;&#39;b&#39;&#39;&#39;, c, &#39;&#39;]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--42-input--2" name="tab-set--42" type="radio"><label class="tab-label" for="tab-set--42-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s2">&quot;[a, &#39;&#39;&#39;b&#39;&#39;&#39;, c, &#39;&#39;]&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="go">&#39;[a, %(L1)s, c, %(L2)s]&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="n">literals</span><span class="p">)</span>
<span class="go">[a, &#39;&#39;&#39;b&#39;&#39;&#39;, c, &#39;&#39;]</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">Comments are substitute too:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--43-input--1" name="tab-set--43" type="radio"><label class="tab-label" for="tab-set--43-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s2">&quot;code &#39;#&#39; # ccc &#39;t&#39;&quot;</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;code %(L1)s #%(L2)s&#39;</span>
<span class="gp">sage:</span> <span class="n">s</span> <span class="o">%</span> <span class="n">literals</span>
<span class="go">&quot;code &#39;#&#39; # ccc &#39;t&#39;&quot;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--43-input--2" name="tab-set--43" type="radio"><label class="tab-label" for="tab-set--43-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s2">&quot;code &#39;#&#39; # ccc &#39;t&#39;&quot;</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;code %(L1)s #%(L2)s&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">%</span> <span class="n">literals</span>
<span class="go">&quot;code &#39;#&#39; # ccc &#39;t&#39;&quot;</span>
</pre></div>
</div>
</div>
</div>
<p class="with-sage-tab with-python-tab">A state is returned so one can break strings across multiple calls to
this function:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--44-input--1" name="tab-set--44" type="radio"><label class="tab-label" for="tab-set--44-input--1">Sage</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">sage:</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s1">&#39;s = &quot;some&#39;</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;s = %(L1)s&#39;</span>
<span class="gp">sage:</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s1">&#39;thing&quot; * 5&#39;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;%(L1)s * 5&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--44-input--2" name="tab-set--44" type="radio"><label class="tab-label" for="tab-set--44-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-ipycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">sage.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s1">&#39;s = &quot;some&#39;</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;s = %(L1)s&#39;</span>
<span class="gp">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">,</span> <span class="n">literals</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">strip_string_literals</span><span class="p">(</span><span class="s1">&#39;thing&quot; * 5&#39;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span> <span class="n">s</span>
<span class="go">&#39;%(L1)s * 5&#39;</span>
</pre></div>
</div>
</div>
</div>
</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="load.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Load Python, Sage, Cython, Fortran and Magma files in Sage</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../misc/trace.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Interactively tracing execution of a command</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2005--2025, The Sage Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">The Sage Preparser</a><ul>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStack"><code class="docutils literal notranslate"><span class="pre">QuoteStack</span></code></a><ul>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStack.peek"><code class="docutils literal notranslate"><span class="pre">peek()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStack.pop"><code class="docutils literal notranslate"><span class="pre">pop()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStack.push"><code class="docutils literal notranslate"><span class="pre">push()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStack.safe_delimiter"><code class="docutils literal notranslate"><span class="pre">safe_delimiter()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage.repl.preparse.QuoteStackFrame"><code class="docutils literal notranslate"><span class="pre">QuoteStackFrame</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.containing_block"><code class="docutils literal notranslate"><span class="pre">containing_block()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.extract_numeric_literals"><code class="docutils literal notranslate"><span class="pre">extract_numeric_literals()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.handle_encoding_declaration"><code class="docutils literal notranslate"><span class="pre">handle_encoding_declaration()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.implicit_mul"><code class="docutils literal notranslate"><span class="pre">implicit_mul()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.implicit_multiplication"><code class="docutils literal notranslate"><span class="pre">implicit_multiplication()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.in_quote"><code class="docutils literal notranslate"><span class="pre">in_quote()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.isalphadigit_"><code class="docutils literal notranslate"><span class="pre">isalphadigit_()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.parse_ellipsis"><code class="docutils literal notranslate"><span class="pre">parse_ellipsis()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse"><code class="docutils literal notranslate"><span class="pre">preparse()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_calculus"><code class="docutils literal notranslate"><span class="pre">preparse_calculus()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_file"><code class="docutils literal notranslate"><span class="pre">preparse_file()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_file_named"><code class="docutils literal notranslate"><span class="pre">preparse_file_named()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_file_named_to_stream"><code class="docutils literal notranslate"><span class="pre">preparse_file_named_to_stream()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_generators"><code class="docutils literal notranslate"><span class="pre">preparse_generators()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.preparse_numeric_literals"><code class="docutils literal notranslate"><span class="pre">preparse_numeric_literals()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.strip_prompts"><code class="docutils literal notranslate"><span class="pre">strip_prompts()</span></code></a></li>
<li><a class="reference internal" href="#sage.repl.preparse.strip_string_literals"><code class="docutils literal notranslate"><span class="pre">strip_string_literals()</span></code></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../%5fstatic/documentation_options.js"></script>
    <script src="../../../%5fstatic/doctools.js"></script>
    <script src="../../../%5fstatic/sphinx_highlight.js"></script>
    <script src="../../../%5fstatic/scripts/furo.js"></script>
    <script src="../../../%5fstatic/clipboard.min.js"></script>
    <script src="../../../%5fstatic/copybutton.js"></script>
    <script src="../../../%5fstatic/tabs.js"></script>
    <script src="../../../%5fstatic/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../%5fstatic/jupyter-sphinx-furo.js"></script>
    </body>
</html>